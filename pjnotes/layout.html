{%- extends "basic/layout.html" %}

{%- block extrahead %}
  {{ super() }}
  <link rel="stylesheet" href="{{ pathto('_static/pj_touch.css', 1) }}" type="text/css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
  {% if theme_touch_icon %}
    <link rel="apple-touch-icon" href="{{ pathto('_static/' ~ theme_touch_icon, 1) }}" />
  {% endif %}
  {% if theme_canonical_url %}
    <link rel="canonical" href="{{ theme_canonical_url }}{{ pagename }}.html"/>
  {% endif %}
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
{% endblock %}

{# top+bottom related navs; we also have our own in sidebar #}
{%- macro rellink_markup() %}
      {%- if prev %}
      <a href="{{ prev.link|e }}" title="previous document">&lArr;</a>
      {%- endif %}
      {%- if next %}
      <a href="{{ next.link|e }}" title="next document">&rArr;</a>
      {%- endif %}
{%- endmacro %}

{%- set theme_show_relbar_top = theme_show_relbar_top or theme_show_relbars %}
{%- set theme_show_relbar_bottom = theme_show_relbar_bottom or theme_show_relbars %}

{# removed existing top+bottom related nav, and embed in sidebar #}
{%- block relbar1 %}{% endblock %}
{%- block relbar2 %}{% endblock %}

{# nav should appear before content, not after #}
{%- block content %}
    <header>
        <div class="logo-box">
            <svg height="70" width="26">
            <path d="M 3 59
                     l 0 -42
                     A 10 10 1 0 1 23 17
                     l 0 37
                     A 7 7 1 0 1 9 54
                     l 0 -30
                     A 5 5 1 0 1 19 24
                     l 0 20" stroke="black" stroke-width="2" fill="none"/>
            </svg>
            <a href="{{ pathto(master_doc) }}">
                {{- '<br>'.join(author.split()) ~ "'s" }}<br>
                <span style="font-family:PT Serif Caption; color:var(--special-words); font-size:20px">
                    notes
                </span>
            </a>
        </div>
        <input id="nav-toggle" type="checkbox" class="nav-toggle">
        <nav>
            <ul>
                <li><a href={{ pathto("cv") }}>CV</a></li>
                <li><a href={{ pathto("about") }}>About</a></li>
                <li><a href={{ pathto("recommendations") }}>Recommendations</a></li>
            </ul>
        </nav>
        <label for="nav-toggle" class="nav-toggle-label">
            <span class="nav-toggle-m1 nav-toggle-mvert"></span>
            <span class="nav-toggle-m2 nav-toggle-mdiag"></span>
            <span class="nav-toggle-m3 nav-toggle-mdiag"></span>
            <span class="nav-toggle-m4 nav-toggle-mvert"></span>
        </label>
    </header>
    <div class="container">
        <input id="sidebar-toggle" type="checkbox" class="sidebar-toggle">
        <div class="sidebar">
            {%- block relbar_top %}
              {%- if theme_show_relbar|tobool %}
                <h3>{{ _('Navigate: ') }}{{- rellink_markup () }}</h3>
              {%- endif %}
            {% endblock %}
            {%- if display_toc %}
            <h3>{{ _('Table of Contents:') }}</h3>
            <div class="toc">
                {{ toc }}
            </div>
            {%- endif %}
            <hr/>
            <div class="social-icons">
                <a href="#"><i class="fab fa-github"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
        </div>
        <label for="sidebar-toggle" class="sidebar-toggle-label">
            <span></span>
        </label>
        <div class="content">
        {% block body %} {% endblock %}
        </div>
    </div>
{%- endblock %}

{%- block footer %}
    <div class="footer">
      {%- if show_copyright %}&copy;{{ copyright }}.{% endif %}
      {%- if theme_show_powered_by|lower == 'true' %}
       Powered by:&nbsp;<a href="http://sphinx-doc.org/">Sphinx {{ sphinx_version }}</a>
       &nbsp;&amp;&nbsp;<a href="https://github.com/bitprophet/alabaster">PJnotes {{ pjnotes_version }}</a>
      {% endif %}
    </div>

    {% if theme_analytics_id %}
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', '{{ theme_analytics_id }}']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    {% endif %}
{%- endblock %}
